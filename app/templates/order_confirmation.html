{% extends "base.html" %}
{% block title %}Order Confirmed — {{ settings.site_name }}{% endblock %}

{% block content %}
<div class="container py-5 text-center">
  <div class="confirmation-wrap mx-auto">
    <div class="confirmation-icon mb-4">
      <i class="bi bi-check-circle-fill"></i>
    </div>
    <h1 class="page-title">Thank You, {{ order.customer_name.split()[0] }}!</h1>
    <p class="lead mt-2">Your order has been placed successfully.</p>
    <div class="order-number-badge my-4">
      Order #{{ order.order_number }}
    </div>
    <p>A confirmation will be sent to <strong>{{ order.customer_email }}</strong>.</p>

    <div class="confirmation-details p-4 text-start mt-4">
      <h5 class="mb-3">Order Summary</h5>
      {% for item in order.items %}
      <div class="d-flex justify-content-between mb-2">
        <span>{{ item.product_name }} × {{ item.quantity }}</span>
        <span>{{ settings.currency_symbol }}{{ '%.2f'|format(item.line_total|float) }}</span>
      </div>
      {% endfor %}
      <hr>
      <div class="d-flex justify-content-between mb-1">
        <span>Subtotal</span>
        <span>{{ settings.currency_symbol }}{{ '%.2f'|format(order.subtotal|float) }}</span>
      </div>
      <div class="d-flex justify-content-between mb-1">
        <span>Delivery</span>
        <span>
          {% if order.delivery_cost == 0 %}Free
          {% else %}{{ settings.currency_symbol }}{{ '%.2f'|format(order.delivery_cost|float) }}
          {% endif %}
        </span>
      </div>
      <div class="d-flex justify-content-between fw-bold fs-5 mt-2">
        <span>Total Paid</span>
        <span>{{ settings.currency_symbol }}{{ '%.2f'|format(order.total_amount|float) }}</span>
      </div>

      <hr>
      <p class="mb-1"><strong>Deliver to:</strong> {{ order.customer_name }}</p>
      <p class="mb-0">{{ order.shipping_address }}{% if order.city %}, {{ order.city }}{% endif %}
        {% if order.postal_code %} {{ order.postal_code }}{% endif %}
        {% if order.country %}, {{ order.country }}{% endif %}
      </p>
    </div>

    <a href="{{ url_for('main_bp.index') }}" class="btn btn-hero mt-5">
      Continue Shopping
    </a>
  </div>
</div>
{% endblock %}
